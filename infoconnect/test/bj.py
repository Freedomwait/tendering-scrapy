# # -*- coding: utf-8 -*-
from scrapy.selector import Selector
import scrapy

responseText = '''<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/> <title>北京市政府采购网</title> <link href="css/was.css" rel="stylesheet" type="text/css"/> <script type="text/javascript" src="js/yahoo-dom-event.js"></script> <script type="text/javascript" src="js/suggest-yui2.js"></script> <script type="text/javascript" src="http://www.ccgp-beijing.gov.cn/js/jquery-3.4.1.min.js"></script> <script type="text/javascript" src="http://www.ccgp-beijing.gov.cn/js/jquery-migrate-3.0.1.min.js"></script> <script type="text/javascript" src="js/jquery.cookie.min.js"></script> <script language="javascript" type="text/javascript" src="outlinetemplet/js/My97DatePicker/WdatePicker.js"></script> <script type="text/javascript"> $(document).ready(function() { $("span[id^=channel_]").click(function(){ var tagId_ = this.id; var channelid_ = tagId_.split("_")[1]; $("input[name=channelid]").val(channelid_); $("#"+tagId_).attr("class","visted"); $("#searchformId").submit(); }); $('.divnavbar a').each(function(idx, aitem){ if($(aitem).find('span').attr('id') =='channel_' + $('.change').val()){ $(aitem).addClass('visted'); } }); $("#timeScope").click(function(){ if(this.value == "def"){ $("#timeLimit").css('display','block'); //$("#timeScope").hide(); }else{ $("#timeLimit").css('display','none'); $("#timeScope").show(); } }); }); window.onload = function() { var ispromptshown = $.cookie('ispromptshown'); if (ispromptshown == "false") return ; var dataUrl = 'searchsuggest?result = false'; new TRSWAS.Suggest('textfield', dataUrl, {autoFocus: true, useShim:false, resultFormat: '约 % result % 条结果' }); }; </script> <script type="text/javascript"> $('.divnavbar > a').click(function () { $(this).addClass("visted").siblings().removeClass('visted'); }); </script> <style> select.channel{ width:120px; border:1px solid #86b2d1; height:23px; margin-left:0px; font-size:15px; } div.pubtime{ font-family: arial, sans-serif; font-style: normal; color: #282; } </style> </head> <body> <script charset="utf-8" type="text/javascript" src="http://ccgp-beijing.gov.cn/js/head.js"></script> <div id="main" style="width:900px;margin:0 auto;"> <div id="header"> <script type="text/javascript"> String.prototype.trim = function () { return this.replace(/^\s*/, "").replace(/\s*$/, ""); }; function checkInput() { if (document.searchform.searchword.value.trim()==''){ document.searchform.searchword.focus(); return false; } else{ setAdvancedWords(); //判断是否选择了时间范围 var timeScope = $("#timeScope").val(); if(timeScope == ""){ $("input[name=timescopecolumn]").val(""); }else{ $("input[name=timescopecolumn]").val("docRelTime"); } return true; } } function getRootSite() { $.ajax({ type: "POST", url: "getchannelselect.jsp", data: { "rootid" : "10000000" }, success:function(data, textStatus){ $(".channelselect").html(data); $(".backurl").html("<a href=\"wcmindex.jsp\" class=\"toplink\">回到主页</a>"); }, error:function(){ $(".channelselect").html("<font color='red'>无法获取站点</font>"); } }); } function setAdvancedWords() { $("input[name=andsen]").val(''); $("input[name=total]").val(''); $("input[name=orsen]").val(''); $("input[name=exclude]").val(''); } </script> <form id="searchformId" name="searchform" action="search" method="get" style="margin-bottom:15px;" onsubmit="return checkInput();"> <div style="float: right"> <span class="backurl"> </span>&nbsp;&nbsp;&nbsp; </div> <div style="clear: both;"></div> <table style="margin-left:13px;"> <!--<tr> <td> <div class="divnavbar"> <a><span id="channel_222753">全部</span></a> <a ><span id="channel_221178">通知</span></a> <a><span id="channel_217666">要闻</span></a> <a><span id="channel_210660">政策</span></a> <a><span id="channel_280097">互动</span></a> <a><span id="channel_236534">专题</span></a> </div> </td> </tr>--> <tr> <td style="height: 30px; vertical-align: bottom"><nobr> <input id="textfield" type="text" name="searchword" class="forminput" style="width:383px" value="博物馆安保服务"/> <input type="hidden" name="perpage" value=""> <input type="hidden" name="templet" value=""> <input type="hidden" name="token" value=""> <input type="hidden" class="change" name="channelid" value="212555" /> <input type="hidden" name="timescopecolumn" value='' /> <input type="hidden" name="andsen" value="" /> <input type="hidden" name="total" value="" /> <input type="hidden" name="orsen" value="" /> <input type="hidden" name="exclude" value="" /> <input type="submit" value="" class="submitbutton"/> </nobr> </td> <td style="vertical-align: bottom"> <!--span class="channelselect"><select id="channelselecter" name="channelid" class="channel"><option value="212555" selected>采购网全文检索</option></select></span--> <span class="channelselect" style="display:none" ><select id="channelselecter" name="channelid" class="channel"><option value="0">全部频道</option><option value="226098" >财政全文</option><option value="220149" >会计网检索</option><option value="228455" >历史公告数据</option><option value="212555" selected>采购网全文检索</option><option value="222753" >北京财政网站</option><option value="203099" >采购网站意向公开搜索</option></select></span> </td> <td style="vertical-align: bottom"> <nobr> <!--<a href="wcmadvanced.jsp?channelid=212555" class="searchbarlink">高级搜索 </a>--> <a href="http://fwxt.czj.beijing.gov.cn/was5/web/search/html/result_search.jsp" class="searchbarlink">高级搜索 </a> </nobr> </td> </tr> <tr> <td colspan="2"> <span><b>模糊检索：</b> <select name="searchscope"> <option value="doctitle" selected>标题</option> <option value="doccontent" >正文</option> <option value="doccontent" >地区</option> <option value="doccontent" >采购人</option> <option value="doccontent" >项目编码</option> <option value="doccontent" >发布时间</option> </select> </span> <span style="margin-left: 34px"><b>排序方式：</b> <select name="orderby"> <option value="RELEVANCE" selected>按相关度</option> <option value="-docRelTime" >按时间</option> </select> </span> <span style="margin-left: 34px"><b>时间范围：</b> <select id="timeScope" name="timescope"> <option value="" >不限时间</option> <option value="week" >近一周</option> <option value="month" >近一月</option> <option value="year" selected>近一年</option> <option value="def" >自定义</option> </select> </span> </td> <td> <div id="timeLimit" style="display:none;"> <span style="width:30px;text-align:center;display:inline-block;">从</span><input type="text" value="" onclick="WdatePicker({dateFmt:'yyyy-MM-dd',isShowClear:false});" name="timeLimitStart"/ style="height:21px;padding-left:5px;width:100px"> <span style="width:30px;text-align:center;display:inline-block;">至</span> <input name="timeLimitEnd" type="text" value="" onclick="WdatePicker({dateFmt:'yyyy-MM-dd',isShowClear:false});"/ style="height:21px;padding-left:5px;width:100px"> </div> </td> </tr> </table> <div style="clear: both; margin-bottom: 6px;"></div> </form> </div> <div class="column" id="column1" style="width: 900px;"> <div class="outline"> <div style="float: left; margin-left:20px;margin-bottom: 15px;">从 <b>采购网全文检索</b> 找到相关结果约20条，用时0.014秒</div> <div style="float: right; margin-bottom: 15px;"></div> <div style="clear: both;"></div> <table style="width:900px"> <tr> <td class="searchresult"> <ol> <li> <div><a href="http://www.ccgp-beijing.gov.cn/xxgg/qjzfcggg/t20210326_1326398.html" class="searchresulttitle" target="_blank">北京民俗<font color=#FF0000>博物馆安保服务</font>政府采购合同</a></div> <div style="margin-top:5px;"> 　　一、合同编号： CYCG_21_0159-001 　　二、合同名称： 北京民俗博物馆安保服务政府采购合同 　　三、项目编号： CYCG_21_0159 　　四、项目名称： 北京民俗博物馆安保服务 　　五、合同主体 　　采购人（甲方）： 北京民俗博物馆 　　地 址： 详见中标成交公告及合...</div> <div class="pubtime">2021.03.26 10:38:59</div> </li> <li> <div><a href="http://www.ccgp-beijing.gov.cn/xxgg/qjzfcggg/qjhtgg/t20210326_1326396.html" class="searchresulttitle" target="_blank">北京民俗<font color=#FF0000>博物馆安保服务</font>政府采购合同</a></div> <div style="margin-top:5px;"> 　　一、合同编号： CYCG_21_0159-001 　　二、合同名称： 北京民俗博物馆安保服务政府采购合同 　　三、项目编号： CYCG_21_0159 　　四、项目名称： 北京民俗博物馆安保服务 　　五、合同主体 　　采购人（甲方）： 北京民俗博物馆 　　地 址： 详见中标成交公告及合...</div> <div class="pubtime">2021.03.26 10:38:59</div> </li> <li> <div><a href="http://www.ccgp-beijing.gov.cn/xxgg/qjzfcggg/qjzbjggg/t20210315_1323672.html" class="searchresulttitle" target="_blank">[朝阳]北京民俗<font color=#FF0000>博物馆安保服务</font></a></div> <div style="margin-top:5px;"> 　　一、项目编号：CYCG_21_0159 　　二、项目名称：北京民俗博物馆安保服务 　　三、中标（成交）信息 　　总中标成交金额：349.2 万元（人民币） 　　中标成交供应商名称、地址及中标成交金额： 　　中标成交供应商名称：北京军福保安服务有限公司 　　中标成交供应商地址：...</div> <div class="pubtime">2021.03.15 15:05:28</div> </li> <li> <div><a href="http://www.ccgp-beijing.gov.cn/xxgg/qjzfcggg/qjgzgg/t20210225_1319897.html" class="searchresulttitle" target="_blank">[朝阳]北京民俗<font color=#FF0000>博物馆安保服务</font>竞争性磋商公告更正公告</a></div> <div style="margin-top:5px;"> 　　一、项目基本情况 　　原公告的采购项目编号：CYCG_21_0159 　　原公告的采购项目名称：北京民俗博物馆安保服务 　　首次公告日期：2021-02-25 12:28　　　　地址：北京市政府采购网http://www.ccgp-beijing.gov.cn；中国政府采购网http://www.ccgp.gov.cn 　　二、更正信...</div> <div class="pubtime">2021.02.25 17:04:11</div> </li> <li> <div><a href="http://www.ccgp-beijing.gov.cn/xxgg/qjzfcggg/t20210225_1319898.html" class="searchresulttitle" target="_blank">[朝阳]北京民俗<font color=#FF0000>博物馆安保服务</font>竞争性磋商公告更正公告</a></div> <div style="margin-top:5px;"> 　　一、项目基本情况 　　原公告的采购项目编号：CYCG_21_0159 　　原公告的采购项目名称：北京民俗博物馆安保服务 　　首次公告日期：2021-02-25 12:28　　　　地址：北京市政府采购网http://www.ccgp-beijing.gov.cn；中国政府采购网http://www.ccgp.gov.cn 　　二、更正信...</div> <div class="pubtime">2021.02.25 17:04:11</div> </li> <li> <div><a href="http://www.ccgp-beijing.gov.cn/xxgg/qjzfcggg/qjzbgg/t20210225_1319770.html" class="searchresulttitle" target="_blank">[朝阳]北京民俗<font color=#FF0000>博物馆安保服务</font>竞争性磋商公告</a></div> <div style="margin-top:5px;"> 　　项目概况 　　北京民俗博物馆安保服务采购项目的潜在供应商应在网上获取获取采购文件，并于2021-03-10 13:30（北京时间）前提交响应文件。 　　一、项目基本情况 　　项目编号：CYCG_21_0159 　　项目名称：北京民俗博物馆安保服务 　　采购方式：竞争性磋商 　　预算金额...</div> <div class="pubtime">2021.02.25 13:50:49</div> </li> <li> <div><a href="http://www.ccgp-beijing.gov.cn/xxgg/qjzfcggg/qjhtgg/t20200430_1235750.html" class="searchresulttitle" target="_blank">北京民俗<font color=#FF0000>博物馆安保服务</font>项目政府采购合同</a></div> <div style="margin-top:5px;"> 　　合同编号： 　　CYCG_20_0090-001 　　合同名称： 　　北京民俗博物馆安保服务项目政府采购合同 　　项目编号： 　　CYCG_20_0090 　　项目名称： 　　北京民俗博物馆安保服务项目 　　采购人(甲方)： 　　北京民俗博物馆 　　供应商(乙方)： 　　北京军福保安服务有限公...</div> <div class="pubtime">2020.04.30 17:32:20</div> </li> <li> <div><a href="http://www.ccgp-beijing.gov.cn/xxgg/qjzfcggg/t20200430_1235756.html" class="searchresulttitle" target="_blank">北京民俗<font color=#FF0000>博物馆安保服务</font>项目政府采购合同</a></div> <div style="margin-top:5px;"> 　　合同编号： 　　CYCG_20_0090-001 　　合同名称： 　　北京民俗博物馆安保服务项目政府采购合同 　　项目编号： 　　CYCG_20_0090 　　项目名称： 　　北京民俗博物馆安保服务项目 　　采购人(甲方)： 　　北京民俗博物馆 　　供应商(乙方)： 　　北京军福保安服务有限公...</div> <div class="pubtime">2020.04.30 17:32:20</div> </li> <li> <div><a href="http://www.ccgp-beijing.gov.cn/xxgg/qjzfcggg/qjzbjggg/t20200330_1207244.html" class="searchresulttitle" target="_blank">[朝阳]北京民俗<font color=#FF0000>博物馆安保服务</font>项目成交公告</a></div> <div style="margin-top:5px;"> 　　北京市京发招标有限公司受北京民俗博物馆的委托，就北京民俗博物馆安保服务项目（项目编号：CYCG_20_0090）组织采购，评标工作已经结束，成交结果如下： 　　一、项目信息 　　项目编号：CYCG_20_0090 　　项目名称：北京民俗博物馆安保服务项目 　　项目联系人：靳添茹 ...</div> <div class="pubtime">2020.03.30 14:41:04</div> </li> <li> <div><a href="http://www.ccgp-beijing.gov.cn/xxgg/qjzfcggg/qjzbgg/t20200313_1204337.html" class="searchresulttitle" target="_blank">[朝阳]北京民俗<font color=#FF0000>博物馆安保服务</font>项目竞争性磋商公告</a></div> <div style="margin-top:5px;"> 　　北京市京发招标有限公司受北京民俗博物馆委托，根据《中华人民共和国政府采购法》等有关规定，现对北京民俗博物馆安保服务项目进行竞争性磋商招标，欢迎合格的供应商前来投标。 　　项目名称：北京民俗博物馆安保服务项目 　　项目编号：CYCG_20_0090 　　项目联系方式：...</div> <div class="pubtime">2020.03.13 11:39:08</div> </li> </ol> <div id="outlinebar" style="max-width: 100%;"><a class="first-page" href="search?page=1&channelid=212555&searchword=%E5%8D%9A%E7%89%A9%E9%A6%86%E5%AE%89%E4%BF%9D%E6%9C%8D%E5%8A%A1&keyword=%E5%8D%9A%E7%89%A9%E9%A6%86%E5%AE%89%E4%BF%9D%E6%9C%8D%E5%8A%A1&was_custom_expr=doctitle%3D%28%E5%8D%9A%E7%89%A9%E9%A6%86%E5%AE%89%E4%BF%9D%E6%9C%8D%E5%8A%A1%29&perpage=10&outlinepage=10&searchscope=doctitle&timescope=year&timescopecolumn=&orderby=-DOCRELTIME&timeLimitStart=&timeLimitEnd=&andsen=&total=&orsen=&exclude=" target="_self">首页</a>&nbsp;<a class="prev-page" href="search?page=1&channelid=212555&searchword=%E5%8D%9A%E7%89%A9%E9%A6%86%E5%AE%89%E4%BF%9D%E6%9C%8D%E5%8A%A1&keyword=%E5%8D%9A%E7%89%A9%E9%A6%86%E5%AE%89%E4%BF%9D%E6%9C%8D%E5%8A%A1&was_custom_expr=doctitle%3D%28%E5%8D%9A%E7%89%A9%E9%A6%86%E5%AE%89%E4%BF%9D%E6%9C%8D%E5%8A%A1%29&perpage=10&outlinepage=10&searchscope=doctitle&timescope=year&timescopecolumn=&orderby=-DOCRELTIME&timeLimitStart=&timeLimitEnd=&andsen=&total=&orsen=&exclude=" target="_self">上一页</a>&nbsp;<a target="_self" href="search?page=1&channelid=212555&searchword=%E5%8D%9A%E7%89%A9%E9%A6%86%E5%AE%89%E4%BF%9D%E6%9C%8D%E5%8A%A1&keyword=%E5%8D%9A%E7%89%A9%E9%A6%86%E5%AE%89%E4%BF%9D%E6%9C%8D%E5%8A%A1&was_custom_expr=doctitle%3D%28%E5%8D%9A%E7%89%A9%E9%A6%86%E5%AE%89%E4%BF%9D%E6%9C%8D%E5%8A%A1%29&perpage=10&outlinepage=10&searchscope=doctitle&timescope=year&timescopecolumn=&orderby=-DOCRELTIME&timeLimitStart=&timeLimitEnd=&andsen=&total=&orsen=&exclude=">1</a>&nbsp;<span style="font-weight: bold;border: none;background: none">2</span>&nbsp;</div> <form action="search" method="get" style="vertical-align: bottom"> <div> </div> </form> </td> </tr> </table> </div> </div> <div class="column" id="column2" style="width: 240px;"> </div> <div class="column" id="column3" style="display: none;"></div> </div> <div style="clear:both;"></div> </body> </html> <script charset="utf-8" type="text/javascript" src="http://ccgp-beijing.gov.cn/js/foot.js"></script>'''


selector = Selector(text=responseText).xpath(
    '//a[@class="searchresulttitle"]/@href')

print(selector.getall())
